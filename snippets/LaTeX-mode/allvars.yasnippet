# -*- mode: snippet -*-
# name: allvars
# key: 'allvars
# expand-env: ((yas-indent-line 'fixed))
# --
#+begin_src octave :results value
  $1

$2(if (y-or-n-p "Do you want this source block to return all variables?")
     "  v=who;o='';for i=1:numel(v);n=v{i};x=eval(n);if isscalar(x);s=sprintf('%d',x);elseif ismatrix(x);s=sprintf('\\n%s',disp(x));end;o=sprintf('%s%s = %s\\n\\n',o,n,s);end;ans=strtrim(o);"
   "  ans=")`$3
#+end_src

$0
